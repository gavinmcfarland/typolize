{"version":3,"file":"index.mjs","sources":["src/index.js"],"sourcesContent":["import postcss from 'postcss';\n\nexport default postcss.plugin('postcss-sqrt', () => {\n\n\treturn (root) => {\n\t\troot.walkRules(rule => {\n\t\t\tlet isMatch = false\n\t\t\tconst fnArgs = {}\n\n\t\t\trule.walkDecls(decl => {\n\t\t\t\tconst SQRT_REGEX = /pow\\(([^)]+.+?)\\)/\n\n\t\t\t\t// Check if decl has a sqrt function inside it\n\t\t\t\tisMatch = SQRT_REGEX.exec(decl.value) ? true : false;\n\n\t\t\t\t// If it does grab the value of the function\n\t\t\t\tif (isMatch) {\n\t\t\t\t\tlet matches = SQRT_REGEX.exec(decl.value);\n\t\t\t\t\tconst args = matches[1].split(',')\n\t\t\t\t\tfnArgs.base = args[0].trim()\n\t\t\t\t\tfnArgs.power = parseInt(args[1].trim(), 10)\n\t\t\t\t}\n\n\t\t\t\t// Replace the function with css variable that calculates square root\n\t\t\t\tdecl.value = decl.value.replace(SQRT_REGEX, function () {\n\t\t\t\t\tif (fnArgs.power > 0) {\n\t\t\t\t\t\tlet string = '(' + fnArgs.base\n\t\t\t\t\t\tfor (let i = 0; i < (fnArgs.power - 1); i++) {\n\t\t\t\t\t\t\tstring += ' * ' + fnArgs.base;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn string + ')'\n\t\t\t\t\t} else if (fnArgs.power === 0) {\n\n\t\t\t\t\t\treturn 1\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfnArgs.power = Math.abs(fnArgs.power)\n\t\t\t\t\t\tlet string = '(1 / (' + fnArgs.base\n\t\t\t\t\t\tfor (let i = 0; i < (fnArgs.power - 1); i++) {\n\t\t\t\t\t\t\tstring += ' * ' + fnArgs.base;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn string + '))'\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t})\n\n\t\t})\n\t};\n});\n"],"names":["postcss","plugin","root","walkRules","rule","isMatch","fnArgs","walkDecls","decl","SQRT_REGEX","exec","value","matches","args","split","base","trim","power","parseInt","replace","string","i","Math","abs"],"mappings":";;AAEA,YAAeA,OAAO,CAACC,MAAR,CAAe,cAAf,EAA+B,MAAM;AAEnD,SAAQC,IAAD,IAAU;AAChBA,IAAAA,IAAI,CAACC,SAAL,CAAeC,IAAI,IAAI;AACtB,UAAIC,OAAO,GAAG,KAAd;AACA,YAAMC,MAAM,GAAG,EAAf;AAEAF,MAAAA,IAAI,CAACG,SAAL,CAAeC,IAAI,IAAI;AACtB,cAAMC,UAAU,GAAG,mBAAnB,CADsB;;AAItBJ,QAAAA,OAAO,GAAGI,UAAU,CAACC,IAAX,CAAgBF,IAAI,CAACG,KAArB,IAA8B,IAA9B,GAAqC,KAA/C,CAJsB;;AAOtB,YAAIN,OAAJ,EAAa;AACZ,cAAIO,OAAO,GAAGH,UAAU,CAACC,IAAX,CAAgBF,IAAI,CAACG,KAArB,CAAd;AACA,gBAAME,IAAI,GAAGD,OAAO,CAAC,CAAD,CAAP,CAAWE,KAAX,CAAiB,GAAjB,CAAb;AACAR,UAAAA,MAAM,CAACS,IAAP,GAAcF,IAAI,CAAC,CAAD,CAAJ,CAAQG,IAAR,EAAd;AACAV,UAAAA,MAAM,CAACW,KAAP,GAAeC,QAAQ,CAACL,IAAI,CAAC,CAAD,CAAJ,CAAQG,IAAR,EAAD,EAAiB,EAAjB,CAAvB;AACA,SAZqB;;;AAetBR,QAAAA,IAAI,CAACG,KAAL,GAAaH,IAAI,CAACG,KAAL,CAAWQ,OAAX,CAAmBV,UAAnB,EAA+B,YAAY;AACvD,cAAIH,MAAM,CAACW,KAAP,GAAe,CAAnB,EAAsB;AACrB,gBAAIG,MAAM,GAAG,MAAMd,MAAM,CAACS,IAA1B;;AACA,iBAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAIf,MAAM,CAACW,KAAP,GAAe,CAApC,EAAwCI,CAAC,EAAzC,EAA6C;AAC5CD,cAAAA,MAAM,IAAI,QAAQd,MAAM,CAACS,IAAzB;AACA;;AACD,mBAAOK,MAAM,GAAG,GAAhB;AACA,WAND,MAMO,IAAId,MAAM,CAACW,KAAP,KAAiB,CAArB,EAAwB;AAE9B,mBAAO,CAAP;AACA,WAHM,MAGA;AACNX,YAAAA,MAAM,CAACW,KAAP,GAAeK,IAAI,CAACC,GAAL,CAASjB,MAAM,CAACW,KAAhB,CAAf;AACA,gBAAIG,MAAM,GAAG,WAAWd,MAAM,CAACS,IAA/B;;AACA,iBAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAIf,MAAM,CAACW,KAAP,GAAe,CAApC,EAAwCI,CAAC,EAAzC,EAA6C;AAC5CD,cAAAA,MAAM,IAAI,QAAQd,MAAM,CAACS,IAAzB;AACA;;AACD,mBAAOK,MAAM,GAAG,IAAhB;AACA;AACD,SAlBY,CAAb;AAoBA,OAnCD;AAqCA,KAzCD;AA0CA,GA3CD;AA4CA,CA9Cc,CAAf;;;;"}